<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 7.0.3-41034ca841d452f3305ba55b9042260aaa1ab5dd  -->
<jasperReport name="visitas_tecnico" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="aaaa1111-2222-3333-4444-555555555555">
	<style name="Title" forecolor="#004D40" fontName="SansSerif" fontSize="18.0" bold="true"/>
	<style name="SectionHeader" mode="Opaque" forecolor="#FFFFFF" backcolor="#00695C" fontName="SansSerif" fontSize="12.0" bold="true"/>
	<style name="Label" forecolor="#2E4A4A" fontName="SansSerif" fontSize="9.0" bold="true"/>
	<style name="Field" forecolor="#333333" fontName="SansSerif" fontSize="9.0"/>
	<style name="FooterText" forecolor="#666666" fontName="SansSerif" fontSize="8.0"/>
	<parameter name="P_ID_TECNICO" class="java.lang.String"/>
	<parameter name="LOGO_ICA" class="java.lang.String"/>
	<query language="sql"><![CDATA[
       SELECT
    v.ID_VISITA,
    v.FECHA_SOLICITUD,
    v.FECHA_VISITA,
    v.MOTIVO,
    v.ESTADO,
    v.OBSERVACIONES,

    l.ID_LOTE,
    l.NUMERO_LOTE,
    l.AREA_HECTAREAS,

    p.ID_PRODUCTOR,
    p.NOMBRE_COMPLETO    AS NOMBRE_PRODUCTOR,
    p.IDENTIFICACION     AS DOC_PRODUCTOR,

    t.ID_TECNICO,
    t.NOMBRE_COMPLETO    AS NOMBRE_TECNICO,
    t.IDENTIFICACION     AS DOC_TECNICO
FROM ADMINICA.VISITA v
    JOIN ADMINICA.LOTE l
        ON l.ID_LOTE = v.ID_LOTE
    JOIN ADMINICA.PRODUCTOR p
        ON p.ID_PRODUCTOR = v.ID_PRODUCTOR
    LEFT JOIN ADMINICA.TECNICO t
        ON t.ID_TECNICO = v.ID_ASISTENTE
WHERE ( $P{P_ID_TECNICO} IS NULL OR t.ID_TECNICO = $P{P_ID_TECNICO} )
ORDER BY
    v.FECHA_VISITA NULLS LAST,
    v.FECHA_SOLICITUD,
    l.NUMERO_LOTE

    ]]></query>
	<field name="ID_VISITA" class="java.lang.String"/>
	<field name="FECHA_SOLICITUD" class="java.sql.Timestamp"/>
	<field name="FECHA_VISITA" class="java.sql.Timestamp"/>
	<field name="MOTIVO" class="java.lang.String"/>
	<field name="ESTADO" class="java.lang.String"/>
	<field name="OBSERVACIONES" class="java.lang.String"/>
	<field name="ID_LOTE" class="java.lang.String"/>
	<field name="NUMERO_LOTE" class="java.lang.String"/>
	<field name="AREA_HECTAREAS" class="java.math.BigDecimal"/>
	<field name="ID_PRODUCTOR" class="java.lang.String"/>
	<field name="NOMBRE_PRODUCTOR" class="java.lang.String"/>
	<field name="DOC_PRODUCTOR" class="java.lang.String"/>
	<field name="ID_TECNICO" class="java.lang.String"/>
	<field name="NOMBRE_TECNICO" class="java.lang.String"/>
	<field name="DOC_TECNICO" class="java.lang.String"/>
	<title height="70">
		<element kind="image" uuid="11111111-aaaa-bbbb-cccc-111111111111" x="0" y="0" width="60" height="60">
			<expression><![CDATA[$P{LOGO_ICA}]]></expression>
		</element>
		<element kind="staticText" uuid="22222222-aaaa-bbbb-cccc-222222222222" x="70" y="0" width="485" height="30" hTextAlign="Center" vTextAlign="Middle" style="Title">
			<text><![CDATA[LISTADO DE VISITAS TÉCNICAS]]></text>
		</element>
		<element kind="staticText" uuid="33333333-aaaa-bbbb-cccc-333333333333" x="70" y="32" width="485" height="16" fontSize="10.0" hTextAlign="Center">
			<text><![CDATA[Sistema ICA-FITO – Visitas a lotes de productores]]></text>
		</element>
		<element kind="line" uuid="44444444-aaaa-bbbb-cccc-444444444444" x="0" y="52" width="555" height="1" forecolor="#00695C"/>
	</title>
	<pageHeader height="30">
		<element kind="staticText" uuid="55555555-aaaa-bbbb-cccc-555555555555" x="0" y="0" width="100" height="14" style="Label">
			<text><![CDATA[Fecha impresión:]]></text>
		</element>
		<element kind="textField" uuid="66666666-aaaa-bbbb-cccc-666666666666" x="100" y="0" width="150" height="14" pattern="dd/MM/yyyy HH:mm" style="Field">
			<expression><![CDATA[new java.util.Date()]]></expression>
		</element>
		<element kind="staticText" uuid="77777777-aaaa-bbbb-cccc-777777777777" x="0" y="16" width="100" height="14" style="Label">
			<text><![CDATA[Filtro técnico:]]></text>
		</element>
		<element kind="textField" uuid="88888888-aaaa-bbbb-cccc-888888888888" x="100" y="16" width="455" height="14" style="Field">
			<expression><![CDATA[
                $P{P_ID_TECNICO} == null
                    ? "Todos los técnicos"
                    : "Técnico: " + $P{P_ID_TECNICO}
            ]]></expression>
		</element>
	</pageHeader>
	<detail>
		<band height="100" splitType="Stretch">
			<element kind="staticText" uuid="99999999-aaaa-bbbb-cccc-999999999999" x="0" y="0" width="555" height="16" style="SectionHeader">
				<text><![CDATA[Visita a lote / productor]]></text>
			</element>
			<element kind="staticText" uuid="aaaaaaaa-aaaa-bbbb-cccc-aaaaaaaaaaaa" x="0" y="20" width="80" height="14" style="Label">
				<text><![CDATA[ID visita:]]></text>
			</element>
			<element kind="textField" uuid="bbbbbbbb-aaaa-bbbb-cccc-bbbbbbbbbbbb" x="80" y="20" width="120" height="14" style="Field">
				<expression><![CDATA[$F{ID_VISITA}]]></expression>
			</element>
			<element kind="staticText" uuid="cccccccc-aaaa-bbbb-cccc-cccccccccccc" x="210" y="20" width="120" height="14" style="Label">
				<text><![CDATA[Fecha visita:]]></text>
			</element>
			<element kind="textField" uuid="dddddddd-aaaa-bbbb-cccc-dddddddddddd" x="330" y="20" width="100" height="14" pattern="dd/MM/yyyy" style="Field">
				<expression><![CDATA[$F{FECHA_VISITA}]]></expression>
			</element>
			<element kind="staticText" uuid="eeeeeeee-aaaa-bbbb-cccc-eeeeeeeeeeee" x="0" y="36" width="80" height="14" style="Label">
				<text><![CDATA[Estado:]]></text>
			</element>
			<element kind="textField" uuid="ffffffff-aaaa-bbbb-cccc-ffffffffffff" x="80" y="36" width="120" height="14" style="Field">
				<expression><![CDATA[$F{ESTADO}]]></expression>
			</element>
			<element kind="staticText" uuid="11111111-bbbb-cccc-dddd-111111111111" x="0" y="52" width="80" height="14" style="Label">
				<text><![CDATA[Productor:]]></text>
			</element>
			<element kind="textField" uuid="22222222-bbbb-cccc-dddd-222222222222" x="80" y="52" width="300" height="14" style="Field">
				<expression><![CDATA[
                    $F{NOMBRE_PRODUCTOR} + " (" + $F{DOC_PRODUCTOR} + ")"
                ]]></expression>
			</element>
			<element kind="staticText" uuid="33333333-bbbb-cccc-dddd-333333333333" x="0" y="68" width="80" height="14" style="Label">
				<text><![CDATA[Lote / área:]]></text>
			</element>
			<element kind="textField" uuid="44444444-bbbb-cccc-dddd-444444444444" x="80" y="68" width="300" height="14" style="Field">
				<expression><![CDATA[
                    "Lote " + $F{NUMERO_LOTE} + " (" + $F{AREA_HECTAREAS} + " ha)"
                ]]></expression>
			</element>
			<element kind="staticText" uuid="55555555-bbbb-cccc-dddd-555555555555" x="0" y="84" width="80" height="14" style="Label">
				<text><![CDATA[Motivo:]]></text>
			</element>
			<element kind="textField" uuid="66666666-bbbb-cccc-dddd-666666666666" x="80" y="84" width="475" height="14" style="Field">
				<expression><![CDATA[$F{MOTIVO}]]></expression>
			</element>
		</band>
	</detail>
	<pageFooter height="30">
		<element kind="textField" uuid="77777777-bbbb-cccc-dddd-777777777777" x="0" y="10" width="555" height="14" hTextAlign="Right" style="FooterText">
			<expression><![CDATA["Página " + $V{PAGE_NUMBER}]]></expression>
		</element>
	</pageFooter>
</jasperReport>
